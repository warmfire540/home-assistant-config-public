title: "Net"
path: "network"
cards:
  - type: "custom:button-card"
    template: chip_back
    variables:
      ulm_chip_back_path: home

  - type: "custom:button-card"
    template: card_title
    name: Net

  - type: custom:button-card
    template: custom_card_speedtest_shogun160
    variables:
      ulm_custom_card_speedtest_download_speed_entity: sensor.speedtest_download
      ulm_custom_card_router_download_speed_entity: sensor.m5_download_speed
      ulm_custom_card_speedtest_upload_speed_entity: sensor.speedtest_upload
      ulm_custom_card_router_upload_speed_entity: sensor.m5_upload_speed
      ulm_custom_card_speedtest_ping_entity: sensor.speedtest_ping
      ulm_custom_card_speedtest_round: true

  - type: "custom:anchor-card"
    anchor_id: low-battery
    offset: -60

  - type: "custom:button-card"
    template: card_title
    label: Low Battery

  - type: custom:auto-entities
    card:
      type: glance
    else:
      type: markdown
      content: >-
        <ha-alert alert-type="info">No battery devices are at their low battery
        threshold!</ha-alert>
    filter:
      include:
        - domain: sensor
          attributes:
            device_class: battery
          state: "< 20"

  - type: "custom:anchor-card"
    anchor_id: disconnected
    offset: -60

  - type: "custom:button-card"
    template: card_title
    label: Disconnected Devices

  - type: custom:auto-entities
    card:
      type: glance
    filter:
      include:
        - state: "unavailable"
          options:
            show_state: false
        - state: "unknown"
          options:
            show_state: false
        - state: "offline"
          options:
            show_state: false
      exclude:
        - entity_id: "*poat_rgb*"
        - entity_id: "*poat_plex*"
        - entity_id: "*mfc_7860*"
        - domain: button
        - domain: tts
        - domain: stt
        - name: "Kitchen Bulb*"

  - type: "custom:button-card"
    template: card_title
    label: Pi Hole Overview

  - type: custom:auto-entities
    card:
      type: entities
    filter:
      include:
        - entity_id: "sensor.pi_hole_*"

  - type: "custom:button-card"
    template: card_title
    label: Connected Devices

  - type: custom:auto-entities
    card:
      type: entities
    filter:
      include:
        - domain: device_tracker
          attributes:
            source_type: router
          options:
            secondary: >-
              {{ (as_timestamp(states[config.entity].last_changed) | timestamp_custom('%b %d %H:%M - ')) +
              states(config.entity) +
              ' ' + state_attr(config.entity, "connection_type")}}
            state: '{{ state_attr(config.entity, "ip") }}'
            type: "custom:template-entity-row"
