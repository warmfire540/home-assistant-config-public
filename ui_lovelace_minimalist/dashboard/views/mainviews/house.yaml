title: "House"
path: "house"
type: custom:grid-layout
layout:
  grid-template-areas: |
    "nav title status ."
    "sensors climate covers alerts"
    "batteries schedules tracking ."
    "poat-phone gina-phone . ."
  mediaquery:
    # portrait monitor
    "only screen and (min-width: 769px) and (max-width: 1400px)":
      grid-template-areas: |
        "nav ."
        "title status"
        "sensors climate"
        "alerts covers"
        "batteries schedules"
        "tracking ."
        "poat-phone gina-phone"
    # Smartphones
    "only screen and (max-width: 768px)":
      grid-template-areas: |
        "nav"
        "title"
        "status"
        "sensors"
        "climate"
        "covers"
        "alerts"
        "batteries"
        "schedules"
        "tracking"
        "poat-phone"
        "gina-phone"
cards:
  - type: custom:button-card
    template: chip_back
    view_layout:
      grid-area: nav
    variables:
      ulm_chip_back_path: home

  - type: custom:button-card
    template: card_title
    name: House
    view_layout:
      grid-area: title

  #################
  # STATUS CHIPS
  #################
  - type: custom:mod-card
    view_layout:
      grid-area: status
    style:
      hui-horizontal-stack-card$: |
        #root { 
          justify-content: center;
        }
    card:
      type: horizontal-stack
      cards:
        - type: custom:button-card
          template: chip_mdi_icon_state
          variables:
            ulm_chip_mdi_icon_state_entity: sensor.living_room_climate_air_temperature
            ulm_chip_mdi_icon_state_icon: mdi:thermometer
          tap_action:
            action: navigate
            navigation_path: "/the-matrix/house"
        - type: custom:button-card
          template: chip_power_consumption
          variables:
            ulm_chip_electric_consumption: sensor.power_in_kw
            ulm_chip_electric_price: false
          tap_action:
            action: navigate
            navigation_path: "/energy"
        - type: custom:button-card
          template: chip_icon_state_if_value
          variables:
            optional: true
            entity: sensor.devices_with_low_battery
            navigation_path: "/the-matrix/house?anchor=low-battery"

  #################
  # SENSORS
  #################
  - type: vertical-stack
    view_layout:
      grid-area: sensors
    cards:
      - type: custom:button-card
        template: card_title
        label: Sensors

      - type: horizontal-stack
        cards:
          - type: custom:auto-entities
            card:
              type: "custom:mini-graph-card"
              name: Temperatures
              show:
                legend: false
            filter:
              include:
                - entity_id: "sensor.*_climate_air_temperature"

          - type: custom:auto-entities
            card:
              type: "custom:mini-graph-card"
              name: Humidities
              show:
                legend: false
            filter:
              include:
                - entity_id: "sensor.*_climate_humidity"

      - type: custom:auto-entities
        card:
          type: "custom:mini-graph-card"
          name: Electricity
          show:
            legend: false
        filter:
          include:
            - entity_id: "sensor.*_1min"

  #################
  # CLIMATE
  #################
  - type: vertical-stack
    view_layout:
      grid-area: climate
    cards:
      - type: custom:button-card
        template: card_title
        label: Climate

      - type: thermostat
        entity: climate.living_room
      
      - type: horizontal-stack
        cards:
          - type: 'custom:button-card'
            template: card_generic
            entity: counter.large_air_filters
          - type: 'custom:button-card'
            template: card_generic
            entity: counter.small_air_filters

  - type: vertical-stack
    view_layout:
      grid-area: covers
    cards:
      - type: custom:button-card
        template: card_title
        label: Blinds

      - type: entities
        entities:
          - cover.all_covers

      - type: custom:decluttering-card
        template: cover
        variables:
          - sensor_prefix: living_room
          - show_details: false
          - compact: true
      - type: custom:decluttering-card
        template: cover
        variables:
          - sensor_prefix: dining_room
          - show_details: false
          - compact: true
      - type: custom:decluttering-card
        template: cover
        variables:
          - sensor_prefix: kitchen
          - show_details: false
          - compact: true
      - type: custom:decluttering-card
        template: cover
        variables:
          - sensor_prefix: bedroom
          - show_details: false
          - compact: true
      - type: custom:decluttering-card
        template: cover
        variables:
          - sensor_prefix: office
          - show_details: false
          - compact: true
      - type: custom:decluttering-card
        template: cover
        variables:
          - sensor_prefix: guest_bedroom
          - show_details: false
          - compact: true

  #################
  # ALERTS
  #################
  - type: vertical-stack
    view_layout:
      grid-area: alerts
    cards:
      - type: custom:button-card
        template: card_title
        label: Alerts

      - type: custom:auto-entities
        card:
          type: entities
        filter:
          include:
            - domain: alert

  - type: vertical-stack
    view_layout:
      grid-area: batteries
    cards:
      - type: "custom:anchor-card"
        anchor_id: low-battery
        offset: -60

      - type: custom:button-card
        template: card_title
        label: Batteries

      - type: custom:auto-entities
        card:
          type: "custom:mini-graph-card"
          name: Batteries
          show:
            legend: false
            fill: false
        filter:
          include:
            - attributes:
                device_class: battery
          exclude:
            - domain: binary_sensor

      - type: custom:auto-entities
        card:
          type: entities
        filter:
          include:
            - attributes:
                device_class: battery
              options:
                state_color: true
          exclude:
            - domain: binary_sensor
        sort:
          method: state
          numeric: true

  #################
  # SCHEDULES
  #################
  - type: vertical-stack
    view_layout:
      grid-area: schedules
    cards:
      - type: custom:button-card
        template: card_title
        label: Schedules/Shopping

      - type: horizontal-stack
        cards:
          - type: custom:trash-card
            entity: calendar.trash
            layout: vertical
            next_days: 4
            settings:
              others:
                color: grey
                icon: mdi:trash-can-outline

          - type: custom:trash-card
            entity: calendar.recycling
            layout: vertical
            next_days: 7
            settings:
              others:
                color: amber
                icon: mdi:recycle-variant

          - type: custom:trash-card
            entity: calendar.yard_waste
            next_days: 7
            layout: vertical
            settings:
              others:
                color: green
                icon: mdi:flower

      - type: custom:button-card
        template: card_input_boolean
        entity: input_boolean.on_vacation
        variables:
          ulm_card_input_boolean_name: Vacation Time!

      - type: shopping-list
        title: Shopping List

  #################
  # DEVICE TRACKING
  #################
  - type: vertical-stack
    view_layout:
      grid-area: tracking
    cards:
      - type: custom:button-card
        template: card_title
        label: Device Tracking

      - type: map
        aspect_ratio: 16:9
        auto_fit: true
        entities:
          - device_tracker.house_keys
          - device_tracker.spare_house_key
          - device_tracker.spare_wires
          - device_tracker.ginas_iphone_13_mini
          - device_tracker.poat_s_iphone_14_pro_max
          - device_tracker.poat_s_iphone_14_pro_max_2
          - zone.home

      - type: custom:auto-entities
        card:
          type: entities
        filter:
          include:
            - attributes:
                source_type: gps

  #################
  # PHONES
  #################
  - type: entities
    title: Poat's iPhone
    view_layout:
      grid-area: poat-phone
    entities:
      - entity: sensor.poat_s_iphone_14_pro_max_activity
        name: Activity
      - entity: sensor.poat_s_iphone_14_pro_max_average_active_pace
        name: Average Active Pace
      - entity: sensor.poat_s_iphone_14_pro_max_battery_level
        name: Battery Level
      - entity: sensor.poat_s_iphone_14_pro_max_battery_state
        name: Battery State
      - entity: sensor.poat_s_iphone_14_pro_max_bssid
        name: BSSID
      - entity: sensor.poat_s_iphone_14_pro_max_connection_type
        name: Connection Type
      - entity: sensor.poat_s_iphone_14_pro_max_distance
        name: Distance
      - entity: binary_sensor.poat_s_iphone_14_pro_max_focus
        name: Focus
      - entity: sensor.poat_s_iphone_14_pro_max_geocoded_location
        name: Geocoded Location
      - entity: sensor.poat_s_iphone_14_pro_max_last_update_trigger
        name: Last Update Trigger
      - entity: sensor.poat_s_iphone_14_pro_max_location_permission
        name: Location permission
      - entity: sensor.poat_s_iphone_14_pro_max_ssid
        name: SSID
      - entity: sensor.poat_s_iphone_14_pro_max_steps
        name: Steps
      - entity: sensor.poat_s_iphone_14_pro_max_storage
        name: Storage
      - entity: sensor.poat_s_iphone_14_pro_max_watch_battery
        name: Watch Battery
      - entity: sensor.poat_s_iphone_14_pro_max_app_version
        name: App Version
      - device_tracker.poat_s_iphone_14_pro_max_2

  - type: entities
    title: Gina's iPhone
    view_layout:
      grid-area: gina-phone
    entities:
      - entity: sensor.gina_s_iphone_13_mini_activity
        name: Activity
      - entity: sensor.gina_s_iphone_13_mini_average_active_pace
        name: Average Active Pace
      - entity: sensor.gina_s_iphone_13_mini_battery_level
        name: Battery Level
      - entity: sensor.gina_s_iphone_13_mini_battery_state
        name: Battery State
      - entity: sensor.gina_s_iphone_13_mini_bssid
        name: BSSID
      - entity: sensor.gina_s_iphone_13_mini_connection_type
        name: Connection Type
      - entity: sensor.gina_s_iphone_13_mini_distance
        name: Distance
      - entity: binary_sensor.gina_s_iphone_13_mini_focus
        name: Focus
      - entity: sensor.gina_s_iphone_13_mini_geocoded_location
        name: Geocoded Location
      - entity: sensor.gina_s_iphone_13_mini_last_update_trigger
        name: Last Update Trigger
      - entity: sensor.gina_s_iphone_13_mini_location_permission
        name: Location permission
      - entity: sensor.gina_s_iphone_13_mini_ssid
        name: SSID
      - entity: sensor.gina_s_iphone_13_mini_steps
        name: Steps
      - entity: sensor.gina_s_iphone_13_mini_storage
        name: Storage
      - entity: sensor.gina_s_iphone_13_mini_watch_battery
        name: Watch Battery
      - entity: sensor.gina_s_iphone_13_mini_app_version
        name: App Version
      - device_tracker.gina_s_iphone_13_mini_2
